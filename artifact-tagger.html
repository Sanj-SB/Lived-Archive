let artifacts = JSON.parse(localStorage.getItem('artifacts')) || [];

document.getElementById('artifactForm').addEventListener('submit', function(event) {
  event.preventDefault();

  const fileInput = document.getElementById('fileInput');
  const desc = document.getElementById('artifactDescription').value.trim();

  if (!fileInput.files.length) {
    alert('Please select a file.');
    return;
  }
  if (!desc) {
    alert('Please enter a description.');
    return;
  }

  const file = fileInput.files[0];
  const reader = new FileReader();

  reader.onload = function(e) {
    let artifact = {
      id: Date.now(),
      description: desc,
      fileData: e.target.result,
      fileName: file.name,
      fileType: file.type,
      approved: false
    };
    artifacts.push(artifact);
    localStorage.setItem('artifacts', JSON.stringify(artifacts));
    alert('Artifact submitted successfully!');
    document.getElementById('artifactForm').reset();
  };

  reader.readAsDataURL(file);
});
